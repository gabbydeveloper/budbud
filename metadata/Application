{
    "type": "Ext.app.Application",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "models": [
            "categoriasModel",
            "usuarioModel"
        ],
        "name": "Bud",
        "requires": [
            "Ext.window.Toast"
        ],
        "stores": [
            "menuStore",
            "categoriasStore",
            "loginStore"
        ],
        "views": [
            "vpMain",
            "winLogin",
            "pnlVistaGeneral",
            "pnlTendencias",
            "pnlDetalleIngresos",
            "pnlDetalleGastos",
            "pnlDetallePresupuesto",
            "pnlComparacion",
            "pnlDetalleMetas",
            "pnlProgreso",
            "pnlCategorias",
            "winCategorias",
            "winRegistro"
        ]
    },
    "configAlternates": {
        "name": "string",
        "stores": "typedarray",
        "views": "typedarray",
        "models": "typedarray",
        "requires": "typedarray"
    },
    "name": "Application",
    "designerId": "application",
    "cn": [
        {
            "type": "fixedfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "launch",
                "implHandler": [
                    "const url = window.location.href;",
                    "ENVIRONMENT = '';",
                    "CONFIG = null;",
                    "",
                    "if(url.indexOf('localhost') !== -1)",
                    "  ENVIRONMENT = 'dev';",
                    "else",
                    "{",
                    "  if(url.indexOf('test') !== -1)",
                    "    ENVIRONMENT = 'test';",
                    "  else",
                    "    ENVIRONMENT = 'prod';",
                    "}",
                    "",
                    "if(ENVIRONMENT !== '')",
                    "{",
                    "  Ext.Ajax.request({",
                    "    url: 'assets/json/config.' + ENVIRONMENT + '.json',",
                    "    success: function(response)",
                    "    {",
                    "      CONFIG = Ext.decode(response.responseText);",
                    "      const storage = Ext.util.LocalStorage.get('main');",
                    "      let token = storage.getItem('token');",
                    "      const main = Ext.getCmp('vpMain');",
                    "",
                    "      if(token === null)",
                    "      {",
                    "        IDUSER = null;",
                    "        if(typeof(main) !== 'undefined')",
                    "          main.destroy();",
                    "        Ext.create('Bud.view.winLogin');",
                    "      }",
                    "      else",
                    "      {",
                    "        const user = CONFIG.user;",
                    "        const pass = CONFIG.pass;",
                    "        const base64Credentials = btoa(user+':'+pass);",
                    "        Ext.Ajax.request",
                    "        (",
                    "          {",
                    "            url: CONFIG.apiUrl + 'userbud',",
                    "            method: 'GET',",
                    "            params: {",
                    "              tkn: token",
                    "            },",
                    "            headers: {",
                    "              'Authorization': 'Basic ' + base64Credentials",
                    "            },",
                    "            callback: function(obj, success, response)",
                    "            {",
                    "              if(success)",
                    "              {",
                    "                let res = Ext.JSON.decode(response.responseText);",
                    "                IDUSER = res.id_usuario;",
                    "                Ext.create('Bud.view.vpMain');",
                    "              }",
                    "              else",
                    "              {",
                    "                if(typeof(main) !== 'undefined')",
                    "                  main.destroy();",
                    "                Ext.create('Bud.view.winLogin');",
                    "              }",
                    "            }",
                    "          }",
                    "        );",
                    "      }",
                    "    },",
                    "    failure: function() {",
                    "      Ext.Msg.alert('Error', 'No se pudo cargar el archivo de configuraci√≥n.');",
                    "    }",
                    "  });",
                    "}"
                ]
            },
            "configAlternates": {
                "fn": "string",
                "implHandler": "code"
            },
            "name": "launch",
            "designerId": "97d26b36-7953-499d-b453-ede1e0db6549"
        }
    ]
}