/*
 * File: app/controller/Funciones.js
 *
 * This file was generated by Sencha Architect version 4.2.9.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 7.3.x Classic library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 7.3.x Classic. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Bud.controller.Funciones', {
  extend: 'Ext.Base',

  singleton: true,

  openPanel: function(obj) {
    if(obj !== 'exit')
    {
      let object = Ext.getCmp(obj);
      let central = Ext.getCmp('cntCentral');
      if(!object)
      {
        central.removeAll();
        panel = Ext.create('Bud.view.' + obj);
        central.add(panel);
        panel.show();
      }
      else
      {
        Ext.Msg.alert('Atención', 'Esta opción está abierta');
      }
    }
    else
    {
      Ext.create('Bud.view.winLogin');
      Ext.getCmp('vpMain').destroy();
    }
  },

  loadStore: function(name, endPoint, extraParams) {

    const store = Ext.data.StoreManager.lookup(name);
    const baseUrl = CONFIG.apiUrl + endPoint;
    const user = CONFIG.user;
    const pass = CONFIG.pass;
    let params = {usuario: IDUSER};

    const base64Credentials = btoa(user+':'+pass);

    store.proxy.setConfig('url', baseUrl);
    store.proxy.setConfig('headers', {
      'Authorization': 'Basic ' + base64Credentials
    });



    if(extraParams)
    {
      for (let key in extraParams) {
        if (extraParams.hasOwnProperty(key)) {
          params[key] = extraParams[key];
        }
      }
    }

    store.proxy.extraParams = params;

    store.load();
  }

});